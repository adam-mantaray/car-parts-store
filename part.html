<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>تفاصيل القطعة - AutoParts EG</title>
  <link rel="stylesheet" href="css/style.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: { extend: {
        colors: { dark: { 1: '#1c1c1e', 2: '#2a2a2e', 3: '#333338' }, gold: { DEFAULT: '#c9a96e', light: '#d4b97e', dark: '#b8944f' }, muted: '#9a9a9e' },
        fontFamily: { cairo: ['Cairo'], inter: ['Inter'], mono: ['JetBrains Mono'] }
      }}
    }
  </script>
</head>
<body class="bg-dark-1">
  <!-- Nav -->
  <nav class="sticky top-0 z-50 bg-dark-2 border-b border-dark-3">
    <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
      <a href="index.html" class="flex items-center gap-3">
        <i class="fa-solid fa-gear text-gold text-2xl"></i>
        <span class="font-cairo text-2xl font-bold">AutoParts <span class="text-gold">EG</span></span>
      </a>
      <div class="flex items-center gap-8">
        <a href="index.html" class="font-cairo font-semibold text-muted hover:text-gold transition-colors">الرئيسية</a>
        <a href="catalog.html" class="font-cairo font-semibold text-muted hover:text-gold transition-colors">الكتالوج</a>
        <a href="cart.html" class="relative text-muted hover:text-gold transition-colors">
          <i class="fa-solid fa-cart-shopping text-xl"></i>
          <span class="cart-badge absolute -top-2 -right-2 bg-gold text-dark-1 text-xs font-bold w-5 h-5 rounded-full items-center justify-center hidden">0</span>
        </a>
      </div>
    </div>
  </nav>

  <div class="max-w-6xl mx-auto px-6 py-10" id="partDetail"></div>

  <!-- Related -->
  <section class="max-w-6xl mx-auto px-6 pb-16">
    <h2 class="font-cairo text-2xl font-bold mb-6">قطع مشابهة</h2>
    <div class="grid grid-cols-1 md:grid-cols-4 gap-5" id="relatedGrid"></div>
  </section>

  <script src="js/app.js"></script>
  <script>
    const id = parseInt(new URLSearchParams(location.search).get('id'));
    const part = PARTS.find(p => p.id === id);
    if (!part) { document.getElementById('partDetail').innerHTML = '<p class="font-cairo text-2xl text-center py-20">القطعة غير موجودة</p>'; }
    else {
      const cat = CATEGORIES.find(c => c.id === part.category);
      document.title = part.nameAr + ' - AutoParts EG';
      document.getElementById('partDetail').innerHTML = `
        <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
          <!-- Image -->
          <div class="bg-dark-2 rounded-2xl flex items-center justify-center h-80 md:h-[480px] border border-dark-3">
            <i class="fa-solid fa-image text-6xl text-dark-3"></i>
          </div>
          <!-- Info -->
          <div>
            <div class="flex items-center gap-3 mb-4">
              <a href="catalog.html?cat=${part.category}" class="badge badge-gold">
                <i class="fa-solid ${cat.icon} ml-1"></i>${cat.nameAr}
              </a>
              ${part.inStock ? '<span class="badge badge-success"><i class="fa-solid fa-check ml-1"></i>متوفر</span>' : '<span class="badge badge-error">غير متوفر</span>'}
            </div>
            <h1 class="font-cairo text-4xl md:text-5xl font-black mb-2">${part.nameAr}</h1>
            <p class="text-muted text-lg font-inter mb-4">${part.nameEn}</p>
            <div class="bg-dark-2 inline-block px-4 py-2 rounded-lg mb-6">
              <span class="text-muted text-sm font-cairo">رقم OEM:</span>
              <span class="font-mono text-gold text-lg font-semibold mr-2">${part.oem}</span>
            </div>
            <div class="mb-8">
              <span class="text-muted text-sm font-cairo block mb-1">السعر</span>
              <span class="price-gold text-4xl">${fmtEGP(part.priceEgp)}</span>
              <span class="text-muted text-sm font-inter mr-3">(${fmtUSD(part.priceUsd)})</span>
            </div>
            <button onclick="addToCart(${part.id})" class="btn-gold text-xl px-12 py-4 w-full md:w-auto">
              <i class="fa-solid fa-cart-plus ml-2"></i>اضف للسلة
            </button>

            <!-- Compatibility -->
            <div class="mt-10 bg-dark-2 rounded-xl p-6 border border-dark-3">
              <h3 class="font-cairo text-xl font-bold mb-4"><i class="fa-solid fa-car text-gold ml-2"></i>التوافق</h3>
              <table class="w-full text-sm">
                <tr class="border-b border-dark-3"><td class="py-2 text-muted font-cairo">الماركة</td><td class="py-2 font-inter">${part.brand}</td></tr>
                <tr class="border-b border-dark-3"><td class="py-2 text-muted font-cairo">الموديل</td><td class="py-2 font-inter">${part.model}</td></tr>
                <tr class="border-b border-dark-3"><td class="py-2 text-muted font-cairo">الشاسيه</td><td class="py-2 font-inter">${part.chassis}</td></tr>
                <tr><td class="py-2 text-muted font-cairo">سنوات الصنع</td><td class="py-2 font-inter">${part.years}</td></tr>
              </table>
            </div>
          </div>
        </div>`;

      // Related parts (same category, different id)
      const related = PARTS.filter(p => p.category === part.category && p.id !== part.id).slice(0, 4);
      const rGrid = document.getElementById('relatedGrid');
      related.forEach(p => {
        rGrid.innerHTML += `
          <a href="part.html?id=${p.id}" class="card block">
            <div class="bg-dark-2 p-6 flex items-center justify-center h-32">
              <i class="fa-solid fa-image text-2xl text-dark-3"></i>
            </div>
            <div class="p-4">
              <p class="font-cairo font-bold text-sm mb-1">${p.nameAr}</p>
              <p class="font-mono text-xs text-gold/60">${p.oem}</p>
              <span class="price-gold text-lg mt-2 block">${fmtEGP(p.priceEgp)}</span>
            </div>
          </a>`;
      });
    }
  </script>
</body>
</html>
